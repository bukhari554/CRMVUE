{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport Dashboard from \"../views/Dashboard.vue\";\nimport Tables from \"../views/Tables.vue\";\nimport Billing from \"../views/Billing.vue\";\nimport VirtualReality from \"../views/VirtualReality.vue\";\nimport Profile from \"../views/Profile.vue\";\nimport Signup from \"../views/Signup.vue\";\nimport Signin from \"../views/Signin.vue\";\nimport store from \"../store\";\nconst routes = [{\n  path: \"/\",\n  name: \"/\",\n  redirect: \"/dashboard-default\",\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/dashboard-default\",\n  name: \"Dashboard\",\n  component: Dashboard,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/tables\",\n  name: \"Tables\",\n  component: Tables,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/billing\",\n  name: \"Billing\",\n  component: Billing,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/virtual-reality\",\n  name: \"Virtual Reality\",\n  component: VirtualReality,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/profile\",\n  name: \"Profile\",\n  component: Profile,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/signin\",\n  name: \"Signin\",\n  component: Signin,\n  meta: {\n    requiresGuest: true\n  }\n}, {\n  path: \"/signup\",\n  name: \"Signup\",\n  component: Signup,\n  meta: {\n    requiresGuest: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n  linkActiveClass: \"active\"\n});\n\n// Navigation guard to protect routes\nrouter.beforeEach((to, from, next) => {\n  // Initialize auth state from localStorage if not already initialized\n  if (!store.state.isAuthenticated) {\n    store.commit(\"initializeAuth\");\n  }\n  const isAuthenticated = store.getters.isAuthenticated;\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\n  const requiresGuest = to.matched.some(record => record.meta.requiresGuest);\n\n  // If route requires authentication and user is not authenticated\n  if (requiresAuth && !isAuthenticated) {\n    next({\n      name: \"Signin\"\n    });\n  }\n  // If route requires guest (signin/signup) and user is authenticated\n  else if (requiresGuest && isAuthenticated) {\n    next({\n      name: \"Dashboard\"\n    });\n  }\n  // Otherwise, allow navigation\n  else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Dashboard","Tables","Billing","VirtualReality","Profile","Signup","Signin","store","routes","path","name","redirect","meta","requiresAuth","component","requiresGuest","router","history","process","env","BASE_URL","linkActiveClass","beforeEach","to","from","next","state","isAuthenticated","commit","getters","matched","some","record"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\nimport Dashboard from \"../views/Dashboard.vue\";\nimport Tables from \"../views/Tables.vue\";\nimport Billing from \"../views/Billing.vue\";\nimport VirtualReality from \"../views/VirtualReality.vue\";\nimport Profile from \"../views/Profile.vue\";\nimport Signup from \"../views/Signup.vue\";\nimport Signin from \"../views/Signin.vue\";\nimport store from \"../store\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"/\",\n    redirect: \"/dashboard-default\",\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/dashboard-default\",\n    name: \"Dashboard\",\n    component: Dashboard,\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/tables\",\n    name: \"Tables\",\n    component: Tables,\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/billing\",\n    name: \"Billing\",\n    component: Billing,\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/virtual-reality\",\n    name: \"Virtual Reality\",\n    component: VirtualReality,\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/profile\",\n    name: \"Profile\",\n    component: Profile,\n    meta: { requiresAuth: true },\n  },\n  {\n    path: \"/signin\",\n    name: \"Signin\",\n    component: Signin,\n    meta: { requiresGuest: true },\n  },\n  {\n    path: \"/signup\",\n    name: \"Signup\",\n    component: Signup,\n    meta: { requiresGuest: true },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n  linkActiveClass: \"active\",\n});\n\n// Navigation guard to protect routes\nrouter.beforeEach((to, from, next) => {\n  // Initialize auth state from localStorage if not already initialized\n  if (!store.state.isAuthenticated) {\n    store.commit(\"initializeAuth\");\n  }\n\n  const isAuthenticated = store.getters.isAuthenticated;\n  const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n  const requiresGuest = to.matched.some((record) => record.meta.requiresGuest);\n\n  // If route requires authentication and user is not authenticated\n  if (requiresAuth && !isAuthenticated) {\n    next({ name: \"Signin\" });\n  }\n  // If route requires guest (signin/signup) and user is authenticated\n  else if (requiresGuest && isAuthenticated) {\n    next({ name: \"Dashboard\" });\n  }\n  // Otherwise, allow navigation\n  else {\n    next();\n  }\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}