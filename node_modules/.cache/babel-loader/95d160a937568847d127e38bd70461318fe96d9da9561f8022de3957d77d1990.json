{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid py-4\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-lg-8\"\n};\nconst _hoisted_4 = {\n  class: \"card mb-4\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-header pb-0\"\n}, [/*#__PURE__*/_createElementVNode(\"h6\", {\n  class: \"mb-0\"\n}, \"Profile Details\")], -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"card-body\"\n};\nconst _hoisted_7 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_8 = {\n  class: \"table table-sm align-items-center mb-0\"\n};\nconst _hoisted_9 = {\n  class: \"text-uppercase text-xs text-secondary\"\n};\nconst _hoisted_10 = {\n  class: \"text-sm\"\n};\nconst _hoisted_11 = {\n  class: \"card\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-header pb-0\"\n}, [/*#__PURE__*/_createElementVNode(\"h6\", {\n  class: \"mb-0\"\n}, \"Change Password\")], -1 /* HOISTED */);\nconst _hoisted_13 = {\n  class: \"card-body\"\n};\nconst _hoisted_14 = {\n  class: \"row\"\n};\nconst _hoisted_15 = {\n  class: \"col-md-12 mb-3\"\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"Current Password\", -1 /* HOISTED */);\nconst _hoisted_17 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"New Password\", -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"col-md-6 mb-3\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\"\n}, \"Confirm New Password\", -1 /* HOISTED */);\nconst _hoisted_21 = {\n  class: \"col-lg-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"main\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.profileRows, row => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: row.label\n    }, [_createElementVNode(\"th\", _hoisted_9, _toDisplayString(row.label), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString($setup.formatValue(row.value)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])]), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"div\", _hoisted_13, [$setup.passwordMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(['alert', $setup.passwordType === 'success' ? 'alert-success' : 'alert-danger'])\n  }, _toDisplayString($setup.passwordMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.handleChangePassword, [\"prevent\"])\n  }, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_hoisted_16, _createVNode($setup[\"ArgonInput\"], {\n    modelValue: $setup.passwordForm.current_password,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.passwordForm.current_password = $event),\n    type: \"password\",\n    placeholder: \"Current Password\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _createVNode($setup[\"ArgonInput\"], {\n    modelValue: $setup.passwordForm.new_password,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.passwordForm.new_password = $event),\n    type: \"password\",\n    placeholder: \"New Password\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _createVNode($setup[\"ArgonInput\"], {\n    modelValue: $setup.passwordForm.new_password_confirmation,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.passwordForm.new_password_confirmation = $event),\n    type: \"password\",\n    placeholder: \"Confirm New Password\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])])]), _createVNode($setup[\"ArgonButton\"], {\n    class: \"mt-3\",\n    color: \"success\",\n    variant: \"gradient\",\n    disabled: $setup.passwordLoading,\n    fullWidth: \"\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.passwordLoading ? \"Updating...\" : \"Update Password\"), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"disabled\"])], 32 /* NEED_HYDRATION */)])])]), _createElementVNode(\"div\", _hoisted_21, [_createVNode($setup[\"ProfileCard\"])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","$setup","profileRows","row","key","label","_hoisted_9","_toDisplayString","_hoisted_10","formatValue","value","_hoisted_11","_hoisted_12","_hoisted_13","passwordMessage","_normalizeClass","passwordType","_createCommentVNode","onSubmit","_withModifiers","handleChangePassword","_hoisted_14","_hoisted_15","_hoisted_16","_createVNode","modelValue","passwordForm","current_password","_cache","$event","type","placeholder","_hoisted_17","_hoisted_18","new_password","_hoisted_19","_hoisted_20","new_password_confirmation","color","variant","disabled","passwordLoading","fullWidth","default","_withCtx","_createTextVNode","_","_hoisted_21"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/views/User/Profile.vue"],"sourcesContent":["<script setup>\nimport { computed, ref, onBeforeMount, onBeforeUnmount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport ProfileCard from \"@/components/ProfileCard.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport { apiPost } from \"@/utils/api.js\";\n\nconst body = document.getElementsByTagName(\"body\")[0];\nconst store = useStore();\n\nconst currentUser = computed(() => store.getters.currentUser || {});\n\nconst formatValue = (value) => {\n  if (value === null || value === undefined || value === \"\") return \"-\";\n  if (typeof value === \"boolean\") return value ? \"Yes\" : \"No\";\n  return value;\n};\n\nconst profileRows = computed(() => {\n  const user = currentUser.value;\n  const rows = [\n    { label: \"ID\", value: user.id },\n    { label: \"Name\", value: user.name },\n    { label: \"Account Type\", value: user.account_type },\n    { label: \"Company Name\", value: user.company_name },\n    { label: \"Title\", value: user.title },\n    { label: \"First Name\", value: user.first_name },\n    { label: \"Last Name\", value: user.last_name },\n    { label: \"Email\", value: user.email },\n    { label: \"Email Verified At\", value: user.email_verified_at ? new Date(user.email_verified_at).toLocaleString() : null },\n    { label: \"Currency\", value: user.currency },\n    { label: \"Country\", value: user.country },\n    { label: \"Country Code\", value: user.country_code },\n    { label: \"Telephone\", value: user.telephone },\n    { label: \"Nationality\", value: user.nationality },\n    { label: \"Address\", value: user.address },\n    { label: \"Source of Funds\", value: user.source_of_funds },\n    { label: \"Declared Bankruptcy\", value: user.declared_bankruptcy },\n    { label: \"USA Resident\", value: user.is_usa_resident },\n    { label: \"Politically Exposed (PEP)\", value: user.is_pep },\n    { label: \"Created At\", value: user.created_at ? new Date(user.created_at).toLocaleString() : null },\n    { label: \"Updated At\", value: user.updated_at ? new Date(user.updated_at).toLocaleString() : null },\n  ];\n\n  return rows.filter((row) => row.value !== undefined);\n});\n\nconst passwordForm = ref({\n  current_password: \"\",\n  new_password: \"\",\n  new_password_confirmation: \"\",\n});\nconst passwordMessage = ref(\"\");\nconst passwordType = ref(\"\");\nconst passwordLoading = ref(false);\n\nconst handleChangePassword = async () => {\n  passwordMessage.value = \"\";\n  passwordType.value = \"\";\n\n  if (!passwordForm.value.current_password || !passwordForm.value.new_password || !passwordForm.value.new_password_confirmation) {\n    passwordMessage.value = \"All password fields are required.\";\n    passwordType.value = \"error\";\n    return;\n  }\n\n  if (passwordForm.value.new_password !== passwordForm.value.new_password_confirmation) {\n    passwordMessage.value = \"New password and confirmation must match.\";\n    passwordType.value = \"error\";\n    return;\n  }\n\n  passwordLoading.value = true;\n  try {\n    const response = await apiPost(\"/client/change-password\", {\n      current_password: passwordForm.value.current_password,\n      new_password: passwordForm.value.new_password,\n      new_password_confirmation: passwordForm.value.new_password_confirmation,\n    });\n\n    const data = await response.json().catch(() => null);\n\n    if (response.ok && data?.success) {\n      passwordMessage.value = data.message || \"Password updated successfully.\";\n      passwordType.value = \"success\";\n      passwordForm.value = {\n        current_password: \"\",\n        new_password: \"\",\n        new_password_confirmation: \"\",\n      };\n    } else {\n      passwordMessage.value =\n        data?.message ||\n        (response.status === 422 ? \"Validation failed. Please check your input.\" : \"Unable to change password.\");\n      passwordType.value = \"error\";\n    }\n  } catch (error) {\n    console.error(\"Password change error:\", error);\n    passwordMessage.value = \"Unable to change password. Please try again.\";\n    passwordType.value = \"error\";\n  } finally {\n    passwordLoading.value = false;\n  }\n};\n\nonBeforeMount(() => {\n  store.state.hideConfigButton = true;\n  body.classList.add(\"profile-page\");\n});\n\nonBeforeUnmount(() => {\n  store.state.hideConfigButton = false;\n  body.classList.remove(\"profile-page\");\n});\n</script>\n\n<template>\n  <main class=\"container-fluid py-4\">\n    <div class=\"row\">\n      <div class=\"col-lg-8\">\n        <div class=\"card mb-4\">\n          <div class=\"card-header pb-0\">\n            <h6 class=\"mb-0\">Profile Details</h6>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <table class=\"table table-sm align-items-center mb-0\">\n                <tbody>\n                  <tr v-for=\"row in profileRows\" :key=\"row.label\">\n                    <th class=\"text-uppercase text-xs text-secondary\">{{ row.label }}</th>\n                    <td class=\"text-sm\">{{ formatValue(row.value) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"card-header pb-0\">\n            <h6 class=\"mb-0\">Change Password</h6>\n          </div>\n          <div class=\"card-body\">\n            <div\n              v-if=\"passwordMessage\"\n              :class=\"['alert', passwordType === 'success' ? 'alert-success' : 'alert-danger']\"\n            >\n              {{ passwordMessage }}\n            </div>\n            <form @submit.prevent=\"handleChangePassword\">\n              <div class=\"row\">\n                <div class=\"col-md-12 mb-3\">\n                  <label class=\"form-label\">Current Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.current_password\"\n                    type=\"password\"\n                    placeholder=\"Current Password\"\n                  />\n                </div>\n                <div class=\"col-md-6 mb-3\">\n                  <label class=\"form-label\">New Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.new_password\"\n                    type=\"password\"\n                    placeholder=\"New Password\"\n                  />\n                </div>\n                <div class=\"col-md-6 mb-3\">\n                  <label class=\"form-label\">Confirm New Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.new_password_confirmation\"\n                    type=\"password\"\n                    placeholder=\"Confirm New Password\"\n                  />\n                </div>\n              </div>\n              <argon-button\n                class=\"mt-3\"\n                color=\"success\"\n                variant=\"gradient\"\n                :disabled=\"passwordLoading\"\n                fullWidth\n              >\n                {{ passwordLoading ? \"Updating...\" : \"Update Password\" }}\n              </argon-button>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-4\">\n        <profile-card />\n      </div>\n    </div>\n  </main>\n</template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}