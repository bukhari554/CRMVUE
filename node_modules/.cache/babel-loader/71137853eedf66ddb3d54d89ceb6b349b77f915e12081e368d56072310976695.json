{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { ref, onBeforeUnmount, onBeforeMount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport Navbar from \"@/examples/PageLayout/Navbarsignin.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport ArgonSwitch from \"@/components/ArgonSwitch.vue\";\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport { APP_CONFIG } from \"@/Data/appConfig.js\";\nexport default {\n  __name: 'AdminSignin',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const body = document.getElementsByTagName(\"body\")[0];\n    const store = useStore();\n    const router = useRouter();\n    const email = ref(\"\");\n    const password = ref(\"\");\n    const rememberMe = ref(false);\n    const loading = ref(false);\n    const message = ref(\"\");\n    const messageType = ref(\"\");\n    onBeforeMount(() => {\n      // Initialize auth if not already done\n      if (!store.state.isAuthenticated) {\n        store.commit(\"initializeAuth\");\n      }\n\n      // Redirect if already authenticated\n      if (store.getters.isAuthenticated) {\n        router.push(\"/dashboard-default\");\n        return;\n      }\n      store.state.hideConfigButton = true;\n      store.state.showNavbar = false;\n      store.state.showSidenav = false;\n      store.state.showFooter = false;\n      body.classList.remove(\"bg-gray-100\");\n    });\n    onBeforeUnmount(() => {\n      store.state.hideConfigButton = false;\n      store.state.showNavbar = true;\n      store.state.showSidenav = true;\n      store.state.showFooter = true;\n      body.classList.add(\"bg-gray-100\");\n    });\n    const handleLogin = async () => {\n      message.value = \"\";\n      messageType.value = \"\";\n      const trimmedEmail = email.value.trim();\n      if (!trimmedEmail || !password.value) {\n        message.value = \"Email and password are required.\";\n        messageType.value = \"error\";\n        return;\n      }\n      loading.value = true;\n      try {\n        const response = await fetch(`${APP_CONFIG.baseApiUrl}/client/login`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n          },\n          body: JSON.stringify({\n            email: trimmedEmail,\n            password: password.value\n          })\n        });\n        const data = await response.json().catch(() => null);\n        if (response.ok && data?.success) {\n          console.log(\"Login successful:\", data);\n\n          // Extract token and user data from response structure\n          const token = data?.data?.token;\n          const user = data?.data?.user;\n\n          // Store authentication in Vuex\n          if (token && user) {\n            store.dispatch(\"login\", {\n              token,\n              user\n            });\n            message.value = \"Login successful! Redirecting...\";\n            messageType.value = \"success\";\n            setTimeout(() => {\n              router.push(\"/dashboard-default\");\n            }, 1500);\n          } else {\n            message.value = \"Login successful but no token or user data received.\";\n            messageType.value = \"error\";\n          }\n        } else {\n          const errorText = data?.message || (response.status === 401 ? \"Invalid email or password.\" : \"Login failed. Please try again.\");\n          message.value = errorText;\n          messageType.value = \"error\";\n        }\n      } catch (error) {\n        console.error(\"Login error:\", error);\n        message.value = \"Unable to reach the server. Please ensure the backend is running.\";\n        messageType.value = \"error\";\n      } finally {\n        loading.value = false;\n      }\n    };\n    const __returned__ = {\n      body,\n      store,\n      router,\n      email,\n      password,\n      rememberMe,\n      loading,\n      message,\n      messageType,\n      handleLogin,\n      ref,\n      onBeforeUnmount,\n      onBeforeMount,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      Navbar,\n      ArgonInput,\n      ArgonSwitch,\n      ArgonButton,\n      get APP_CONFIG() {\n        return APP_CONFIG;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onBeforeUnmount","onBeforeMount","useStore","useRouter","Navbar","ArgonInput","ArgonSwitch","ArgonButton","APP_CONFIG","body","document","getElementsByTagName","store","router","email","password","rememberMe","loading","message","messageType","state","isAuthenticated","commit","getters","push","hideConfigButton","showNavbar","showSidenav","showFooter","classList","remove","add","handleLogin","value","trimmedEmail","trim","response","fetch","baseApiUrl","method","headers","JSON","stringify","data","json","catch","ok","success","console","log","token","user","dispatch","setTimeout","errorText","status","error"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/views/Admin/AdminSignin.vue"],"sourcesContent":["<script setup>\nimport { ref, onBeforeUnmount, onBeforeMount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport Navbar from \"@/examples/PageLayout/Navbarsignin.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport ArgonSwitch from \"@/components/ArgonSwitch.vue\";\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport { APP_CONFIG } from \"@/Data/appConfig.js\";\nconst body = document.getElementsByTagName(\"body\")[0];\n\nconst store = useStore();\nconst router = useRouter();\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst rememberMe = ref(false);\nconst loading = ref(false);\nconst message = ref(\"\");\nconst messageType = ref(\"\");\n\nonBeforeMount(() => {\n  // Initialize auth if not already done\n  if (!store.state.isAuthenticated) {\n    store.commit(\"initializeAuth\");\n  }\n  \n  // Redirect if already authenticated\n  if (store.getters.isAuthenticated) {\n    router.push(\"/dashboard-default\");\n    return;\n  }\n  \n  store.state.hideConfigButton = true;\n  store.state.showNavbar = false;\n  store.state.showSidenav = false;\n  store.state.showFooter = false;\n  body.classList.remove(\"bg-gray-100\");\n});\nonBeforeUnmount(() => {\n  store.state.hideConfigButton = false;\n  store.state.showNavbar = true;\n  store.state.showSidenav = true;\n  store.state.showFooter = true;\n  body.classList.add(\"bg-gray-100\");\n});\n\nconst handleLogin = async () => {\n  message.value = \"\";\n  messageType.value = \"\";\n\n  const trimmedEmail = email.value.trim();\n  if (!trimmedEmail || !password.value) {\n    message.value = \"Email and password are required.\";\n    messageType.value = \"error\";\n    return;\n  }\n\n  loading.value = true;\n\n  try {\n    const response = await fetch(`${APP_CONFIG.baseApiUrl}/client/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: trimmedEmail,\n        password: password.value\n      })\n    });\n\n    const data = await response.json().catch(() => null);\n\n    if (response.ok && data?.success) {\n      console.log(\"Login successful:\", data);\n      \n      // Extract token and user data from response structure\n      const token = data?.data?.token;\n      const user = data?.data?.user;\n      \n      // Store authentication in Vuex\n      if (token && user) {\n        store.dispatch(\"login\", { token, user });\n        message.value = \"Login successful! Redirecting...\";\n        messageType.value = \"success\";\n        setTimeout(() => {\n          router.push(\"/dashboard-default\");\n        }, 1500);\n      } else {\n        message.value = \"Login successful but no token or user data received.\";\n        messageType.value = \"error\";\n      }\n    } else {\n      const errorText =\n        data?.message ||\n        (response.status === 401\n          ? \"Invalid email or password.\"\n          : \"Login failed. Please try again.\");\n      message.value = errorText;\n      messageType.value = \"error\";\n    }\n  } catch (error) {\n    console.error(\"Login error:\", error);\n    message.value =\n      \"Unable to reach the server. Please ensure the backend is running.\";\n    messageType.value = \"error\";\n  } finally {\n    loading.value = false;\n  }\n};\n</script>\n<template>\n  <div class=\"container top-0 position-sticky z-index-sticky\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <navbar\n          isBlur=\"blur  border-radius-lg my-3 py-2 start-0 end-0 mx-4 shadow\"\n          v-bind:darkMode=\"true\"\n          isBtn=\"bg-gradient-success\"\n        />\n      </div>\n    </div>\n  </div>\n  <main class=\"mt-0 main-content\">\n    <section>\n      <div class=\"page-header min-vh-100\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div\n              class=\"mx-auto col-xl-4 col-lg-5 col-md-7 d-flex flex-column mx-lg-0\"\n            >\n              <div class=\"card card-plain\">\n                <div class=\"pb-0 card-header text-start\">\n                  <h4 class=\"font-weight-bolder text-align-center\">Admin Sign In</h4>\n                  <p class=\"mb-0\">Enter your email and password to sign in</p>\n                </div>\n                <div class=\"card-body\">\n                  <form role=\"form\" @submit.prevent=\"handleLogin\">\n                    <div\n                      v-if=\"message\"\n                      :class=\"[\n                        'alert',\n                        messageType === 'success'\n                          ? 'alert-success'\n                          : 'alert-danger'\n                      ]\"\n                    >\n                      {{ message }}\n                    </div>\n                    <div class=\"mb-3\">\n                      <argon-input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        name=\"email\"\n                        size=\"lg\"\n                        v-model=\"email\"\n                      />\n                    </div>\n                    <div class=\"mb-3\">\n                      <argon-input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        name=\"password\"\n                        size=\"lg\"\n                        v-model=\"password\"\n                      />\n                    </div>\n                    <argon-switch\n                      id=\"rememberMe\"\n                      name=\"remember-me\"\n                      v-model=\"rememberMe\"\n                      >Remember me</argon-switch\n                    >\n\n                    <div class=\"text-center\">\n                      <argon-button\n                        class=\"mt-4\"\n                        variant=\"gradient\"\n                        color=\"success\"\n                        fullWidth\n                        size=\"lg\"\n                        :disabled=\"loading\"\n                        >{{ loading ? \"Signing in...\" : \"Sign in\" }}</argon-button\n                      >\n                    </div>\n                  </form>\n                </div>\n                <div class=\"px-1 pt-0 text-center card-footer px-lg-2\">\n                  <p class=\"mx-auto mb-4 text-sm\">\n                    Don't have an account?\n                    <a\n                      href=\"/signup\"\n                      class=\"text-success text-gradient font-weight-bold\"\n                      >Sign up</a\n                    >\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div\n              class=\"top-0 my-auto text-center col-6 d-lg-flex d-none h-100 pe-0 position-absolute end-0 justify-content-center flex-column\"\n            >\n              <div\n                class=\"position-relative bg-gradient-primary h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center overflow-hidden\"\n                style=\"\n                  background-image: url(&quot;https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/signin-ill.jpg&quot;);\n                  background-size: cover;\n                \"\n              >\n                <span class=\"mask bg-gradient-success opacity-6\"></span>\n                <h4\n                  class=\"mt-5 text-white font-weight-bolder position-relative\"\n                >\n                  \"Attention is the new currency\"\n                </h4>\n                <p class=\"text-white position-relative\">\n                  The more effortless the writing looks, the more effort the\n                  writer actually put into the process.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}