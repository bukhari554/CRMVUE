{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport { APP_CONFIG } from \"@/Data/appConfig.js\";\nimport store from \"@/store\";\n\n/**\n * Make an authenticated API call with Bearer token\n * @param {string} endpoint - API endpoint (without base URL)\n * @param {object} options - Fetch options (method, body, etc.)\n * @returns {Promise<Response>}\n */\nexport async function apiCall(endpoint, options = {}) {\n  const token = store.getters.authToken;\n  const defaultHeaders = {\n    \"Content-Type\": \"application/json\",\n    \"Accept\": \"application/json\"\n  };\n\n  // Add Authorization header if token exists\n  if (token) {\n    defaultHeaders[\"Authorization\"] = `Bearer ${token}`;\n  }\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers\n    }\n  };\n  const url = endpoint.startsWith(\"http\") ? endpoint : `${APP_CONFIG.baseApiUrl}${endpoint.startsWith(\"/\") ? endpoint : `/${endpoint}`}`;\n  const response = await fetch(url, config);\n\n  // If unauthorized, clear auth and redirect to login\n  if (response.status === 401) {\n    store.dispatch(\"logout\");\n    if (window.location.pathname !== \"/signin\") {\n      window.location.href = \"/signin\";\n    }\n  }\n  return response;\n}\n\n/**\n * Make a GET request\n */\nexport async function apiGet(endpoint, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"GET\"\n  });\n}\n\n/**\n * Make a POST request\n */\nexport async function apiPost(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"POST\",\n    body: JSON.stringify(data)\n  });\n}\n\n/**\n * Make a PUT request\n */\nexport async function apiPut(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"PUT\",\n    body: JSON.stringify(data)\n  });\n}\n\n/**\n * Make a PATCH request\n */\nexport async function apiPatch(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"PATCH\",\n    body: JSON.stringify(data)\n  });\n}\n\n/**\n * Make a DELETE request\n */\nexport async function apiDelete(endpoint, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"DELETE\"\n  });\n}","map":{"version":3,"names":["APP_CONFIG","store","apiCall","endpoint","options","token","getters","authToken","defaultHeaders","config","headers","url","startsWith","baseApiUrl","response","fetch","status","dispatch","window","location","pathname","href","apiGet","method","apiPost","data","body","JSON","stringify","apiPut","apiPatch","apiDelete"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/utils/api.js"],"sourcesContent":["import { APP_CONFIG } from \"@/Data/appConfig.js\";\nimport store from \"@/store\";\n\n/**\n * Make an authenticated API call with Bearer token\n * @param {string} endpoint - API endpoint (without base URL)\n * @param {object} options - Fetch options (method, body, etc.)\n * @returns {Promise<Response>}\n */\nexport async function apiCall(endpoint, options = {}) {\n  const token = store.getters.authToken;\n  \n  const defaultHeaders = {\n    \"Content-Type\": \"application/json\",\n    \"Accept\": \"application/json\",\n  };\n\n  // Add Authorization header if token exists\n  if (token) {\n    defaultHeaders[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers,\n    },\n  };\n\n  const url = endpoint.startsWith(\"http\") \n    ? endpoint \n    : `${APP_CONFIG.baseApiUrl}${endpoint.startsWith(\"/\") ? endpoint : `/${endpoint}`}`;\n\n  const response = await fetch(url, config);\n\n  // If unauthorized, clear auth and redirect to login\n  if (response.status === 401) {\n    store.dispatch(\"logout\");\n    if (window.location.pathname !== \"/signin\") {\n      window.location.href = \"/signin\";\n    }\n  }\n\n  return response;\n}\n\n/**\n * Make a GET request\n */\nexport async function apiGet(endpoint, options = {}) {\n  return apiCall(endpoint, { ...options, method: \"GET\" });\n}\n\n/**\n * Make a POST request\n */\nexport async function apiPost(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"POST\",\n    body: JSON.stringify(data),\n  });\n}\n\n/**\n * Make a PUT request\n */\nexport async function apiPut(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"PUT\",\n    body: JSON.stringify(data),\n  });\n}\n\n/**\n * Make a PATCH request\n */\nexport async function apiPatch(endpoint, data, options = {}) {\n  return apiCall(endpoint, {\n    ...options,\n    method: \"PATCH\",\n    body: JSON.stringify(data),\n  });\n}\n\n/**\n * Make a DELETE request\n */\nexport async function apiDelete(endpoint, options = {}) {\n  return apiCall(endpoint, { ...options, method: \"DELETE\" });\n}\n\n\n"],"mappings":";AAAA,SAASA,UAAU,QAAQ,qBAAqB;AAChD,OAAOC,KAAK,MAAM,SAAS;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,OAAOA,CAACC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACpD,MAAMC,KAAK,GAAGJ,KAAK,CAACK,OAAO,CAACC,SAAS;EAErC,MAAMC,cAAc,GAAG;IACrB,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE;EACZ,CAAC;;EAED;EACA,IAAIH,KAAK,EAAE;IACTG,cAAc,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EACrD;EAEA,MAAMI,MAAM,GAAG;IACb,GAAGL,OAAO;IACVM,OAAO,EAAE;MACP,GAAGF,cAAc;MACjB,GAAGJ,OAAO,CAACM;IACb;EACF,CAAC;EAED,MAAMC,GAAG,GAAGR,QAAQ,CAACS,UAAU,CAAC,MAAM,CAAC,GACnCT,QAAQ,GACR,GAAGH,UAAU,CAACa,UAAU,GAAGV,QAAQ,CAACS,UAAU,CAAC,GAAG,CAAC,GAAGT,QAAQ,GAAG,IAAIA,QAAQ,EAAE,EAAE;EAErF,MAAMW,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,EAAEF,MAAM,CAAC;;EAEzC;EACA,IAAIK,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;IAC3Bf,KAAK,CAACgB,QAAQ,CAAC,QAAQ,CAAC;IACxB,IAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,SAAS,EAAE;MAC1CF,MAAM,CAACC,QAAQ,CAACE,IAAI,GAAG,SAAS;IAClC;EACF;EAEA,OAAOP,QAAQ;AACjB;;AAEA;AACA;AACA;AACA,OAAO,eAAeQ,MAAMA,CAACnB,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACnD,OAAOF,OAAO,CAACC,QAAQ,EAAE;IAAE,GAAGC,OAAO;IAAEmB,MAAM,EAAE;EAAM,CAAC,CAAC;AACzD;;AAEA;AACA;AACA;AACA,OAAO,eAAeC,OAAOA,CAACrB,QAAQ,EAAEsB,IAAI,EAAErB,OAAO,GAAG,CAAC,CAAC,EAAE;EAC1D,OAAOF,OAAO,CAACC,QAAQ,EAAE;IACvB,GAAGC,OAAO;IACVmB,MAAM,EAAE,MAAM;IACdG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,eAAeI,MAAMA,CAAC1B,QAAQ,EAAEsB,IAAI,EAAErB,OAAO,GAAG,CAAC,CAAC,EAAE;EACzD,OAAOF,OAAO,CAACC,QAAQ,EAAE;IACvB,GAAGC,OAAO;IACVmB,MAAM,EAAE,KAAK;IACbG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,eAAeK,QAAQA,CAAC3B,QAAQ,EAAEsB,IAAI,EAAErB,OAAO,GAAG,CAAC,CAAC,EAAE;EAC3D,OAAOF,OAAO,CAACC,QAAQ,EAAE;IACvB,GAAGC,OAAO;IACVmB,MAAM,EAAE,OAAO;IACfG,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,eAAeM,SAASA,CAAC5B,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACtD,OAAOF,OAAO,CAACC,QAAQ,EAAE;IAAE,GAAGC,OAAO;IAAEmB,MAAM,EAAE;EAAS,CAAC,CAAC;AAC5D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}