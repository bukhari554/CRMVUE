{"ast":null,"code":"import { computed, ref, onBeforeMount, onBeforeUnmount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport ProfileCard from \"./components/ProfileCard.vue\";\nimport ArgonInput from \"@/src/components/ArgonInput.vue\";\nimport ArgonButton from \"@/src/components/ArgonButton.vue\";\nimport { apiPost } from \"@/utils/api.js\";\nexport default {\n  __name: 'Profile',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const body = document.getElementsByTagName(\"body\")[0];\n    const store = useStore();\n    const currentUser = computed(() => store.getters.currentUser || {});\n    const formatValue = value => {\n      if (value === null || value === undefined || value === \"\") return \"-\";\n      if (typeof value === \"boolean\") return value ? \"Yes\" : \"No\";\n      return value;\n    };\n    const profileRows = computed(() => {\n      const user = currentUser.value;\n      const rows = [{\n        label: \"ID\",\n        value: user.id\n      }, {\n        label: \"Name\",\n        value: user.name\n      }, {\n        label: \"Account Type\",\n        value: user.account_type\n      }, {\n        label: \"Company Name\",\n        value: user.company_name\n      }, {\n        label: \"Title\",\n        value: user.title\n      }, {\n        label: \"First Name\",\n        value: user.first_name\n      }, {\n        label: \"Last Name\",\n        value: user.last_name\n      }, {\n        label: \"Email\",\n        value: user.email\n      }, {\n        label: \"Email Verified At\",\n        value: user.email_verified_at ? new Date(user.email_verified_at).toLocaleString() : null\n      }, {\n        label: \"Currency\",\n        value: user.currency\n      }, {\n        label: \"Country\",\n        value: user.country\n      }, {\n        label: \"Country Code\",\n        value: user.country_code\n      }, {\n        label: \"Telephone\",\n        value: user.telephone\n      }, {\n        label: \"Nationality\",\n        value: user.nationality\n      }, {\n        label: \"Address\",\n        value: user.address\n      }, {\n        label: \"Source of Funds\",\n        value: user.source_of_funds\n      }, {\n        label: \"Declared Bankruptcy\",\n        value: user.declared_bankruptcy\n      }, {\n        label: \"USA Resident\",\n        value: user.is_usa_resident\n      }, {\n        label: \"Politically Exposed (PEP)\",\n        value: user.is_pep\n      }, {\n        label: \"Created At\",\n        value: user.created_at ? new Date(user.created_at).toLocaleString() : null\n      }, {\n        label: \"Updated At\",\n        value: user.updated_at ? new Date(user.updated_at).toLocaleString() : null\n      }];\n      return rows.filter(row => row.value !== undefined);\n    });\n    const passwordForm = ref({\n      current_password: \"\",\n      new_password: \"\",\n      new_password_confirmation: \"\"\n    });\n    const passwordMessage = ref(\"\");\n    const passwordType = ref(\"\");\n    const passwordLoading = ref(false);\n    const handleChangePassword = async () => {\n      passwordMessage.value = \"\";\n      passwordType.value = \"\";\n      if (!passwordForm.value.current_password || !passwordForm.value.new_password || !passwordForm.value.new_password_confirmation) {\n        passwordMessage.value = \"All password fields are required.\";\n        passwordType.value = \"error\";\n        return;\n      }\n      if (passwordForm.value.new_password !== passwordForm.value.new_password_confirmation) {\n        passwordMessage.value = \"New password and confirmation must match.\";\n        passwordType.value = \"error\";\n        return;\n      }\n      passwordLoading.value = true;\n      try {\n        const response = await apiPost(\"/client/change-password\", {\n          current_password: passwordForm.value.current_password,\n          new_password: passwordForm.value.new_password,\n          new_password_confirmation: passwordForm.value.new_password_confirmation\n        });\n        const data = await response.json().catch(() => null);\n        if (response.ok && data?.success) {\n          passwordMessage.value = data.message || \"Password updated successfully.\";\n          passwordType.value = \"success\";\n          passwordForm.value = {\n            current_password: \"\",\n            new_password: \"\",\n            new_password_confirmation: \"\"\n          };\n        } else {\n          passwordMessage.value = data?.message || (response.status === 422 ? \"Validation failed. Please check your input.\" : \"Unable to change password.\");\n          passwordType.value = \"error\";\n        }\n      } catch (error) {\n        console.error(\"Password change error:\", error);\n        passwordMessage.value = \"Unable to change password. Please try again.\";\n        passwordType.value = \"error\";\n      } finally {\n        passwordLoading.value = false;\n      }\n    };\n    onBeforeMount(() => {\n      store.state.hideConfigButton = true;\n      body.classList.add(\"profile-page\");\n    });\n    onBeforeUnmount(() => {\n      store.state.hideConfigButton = false;\n      body.classList.remove(\"profile-page\");\n    });\n    const __returned__ = {\n      body,\n      store,\n      currentUser,\n      formatValue,\n      profileRows,\n      passwordForm,\n      passwordMessage,\n      passwordType,\n      passwordLoading,\n      handleChangePassword,\n      computed,\n      ref,\n      onBeforeMount,\n      onBeforeUnmount,\n      get useStore() {\n        return useStore;\n      },\n      ProfileCard,\n      ArgonInput,\n      ArgonButton,\n      get apiPost() {\n        return apiPost;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","onBeforeMount","onBeforeUnmount","useStore","ProfileCard","ArgonInput","ArgonButton","apiPost","body","document","getElementsByTagName","store","currentUser","getters","formatValue","value","undefined","profileRows","user","rows","label","id","name","account_type","company_name","title","first_name","last_name","email","email_verified_at","Date","toLocaleString","currency","country","country_code","telephone","nationality","address","source_of_funds","declared_bankruptcy","is_usa_resident","is_pep","created_at","updated_at","filter","row","passwordForm","current_password","new_password","new_password_confirmation","passwordMessage","passwordType","passwordLoading","handleChangePassword","response","data","json","catch","ok","success","message","status","error","console","state","hideConfigButton","classList","add","remove"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/views/User/Profile.vue"],"sourcesContent":["<script setup>\nimport { computed, ref, onBeforeMount, onBeforeUnmount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport ProfileCard from \"./components/ProfileCard.vue\";\nimport ArgonInput from \"@/src/components/ArgonInput.vue\";\nimport ArgonButton from \"@/src/components/ArgonButton.vue\";\nimport { apiPost } from \"@/utils/api.js\";\n\nconst body = document.getElementsByTagName(\"body\")[0];\nconst store = useStore();\n\nconst currentUser = computed(() => store.getters.currentUser || {});\n\nconst formatValue = (value) => {\n  if (value === null || value === undefined || value === \"\") return \"-\";\n  if (typeof value === \"boolean\") return value ? \"Yes\" : \"No\";\n  return value;\n};\n\nconst profileRows = computed(() => {\n  const user = currentUser.value;\n  const rows = [\n    { label: \"ID\", value: user.id },\n    { label: \"Name\", value: user.name },\n    { label: \"Account Type\", value: user.account_type },\n    { label: \"Company Name\", value: user.company_name },\n    { label: \"Title\", value: user.title },\n    { label: \"First Name\", value: user.first_name },\n    { label: \"Last Name\", value: user.last_name },\n    { label: \"Email\", value: user.email },\n    { label: \"Email Verified At\", value: user.email_verified_at ? new Date(user.email_verified_at).toLocaleString() : null },\n    { label: \"Currency\", value: user.currency },\n    { label: \"Country\", value: user.country },\n    { label: \"Country Code\", value: user.country_code },\n    { label: \"Telephone\", value: user.telephone },\n    { label: \"Nationality\", value: user.nationality },\n    { label: \"Address\", value: user.address },\n    { label: \"Source of Funds\", value: user.source_of_funds },\n    { label: \"Declared Bankruptcy\", value: user.declared_bankruptcy },\n    { label: \"USA Resident\", value: user.is_usa_resident },\n    { label: \"Politically Exposed (PEP)\", value: user.is_pep },\n    { label: \"Created At\", value: user.created_at ? new Date(user.created_at).toLocaleString() : null },\n    { label: \"Updated At\", value: user.updated_at ? new Date(user.updated_at).toLocaleString() : null },\n  ];\n\n  return rows.filter((row) => row.value !== undefined);\n});\n\nconst passwordForm = ref({\n  current_password: \"\",\n  new_password: \"\",\n  new_password_confirmation: \"\",\n});\nconst passwordMessage = ref(\"\");\nconst passwordType = ref(\"\");\nconst passwordLoading = ref(false);\n\nconst handleChangePassword = async () => {\n  passwordMessage.value = \"\";\n  passwordType.value = \"\";\n\n  if (!passwordForm.value.current_password || !passwordForm.value.new_password || !passwordForm.value.new_password_confirmation) {\n    passwordMessage.value = \"All password fields are required.\";\n    passwordType.value = \"error\";\n    return;\n  }\n\n  if (passwordForm.value.new_password !== passwordForm.value.new_password_confirmation) {\n    passwordMessage.value = \"New password and confirmation must match.\";\n    passwordType.value = \"error\";\n    return;\n  }\n\n  passwordLoading.value = true;\n  try {\n    const response = await apiPost(\"/client/change-password\", {\n      current_password: passwordForm.value.current_password,\n      new_password: passwordForm.value.new_password,\n      new_password_confirmation: passwordForm.value.new_password_confirmation,\n    });\n\n    const data = await response.json().catch(() => null);\n\n    if (response.ok && data?.success) {\n      passwordMessage.value = data.message || \"Password updated successfully.\";\n      passwordType.value = \"success\";\n      passwordForm.value = {\n        current_password: \"\",\n        new_password: \"\",\n        new_password_confirmation: \"\",\n      };\n    } else {\n      passwordMessage.value =\n        data?.message ||\n        (response.status === 422 ? \"Validation failed. Please check your input.\" : \"Unable to change password.\");\n      passwordType.value = \"error\";\n    }\n  } catch (error) {\n    console.error(\"Password change error:\", error);\n    passwordMessage.value = \"Unable to change password. Please try again.\";\n    passwordType.value = \"error\";\n  } finally {\n    passwordLoading.value = false;\n  }\n};\n\nonBeforeMount(() => {\n  store.state.hideConfigButton = true;\n  body.classList.add(\"profile-page\");\n});\n\nonBeforeUnmount(() => {\n  store.state.hideConfigButton = false;\n  body.classList.remove(\"profile-page\");\n});\n</script>\n\n<template>\n  <main class=\"container-fluid py-4\">\n    <div class=\"row\">\n      <div class=\"col-lg-8\">\n        <div class=\"card mb-4\">\n          <div class=\"card-header pb-0\">\n            <h6 class=\"mb-0\">Profile Details</h6>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <table class=\"table table-sm align-items-center mb-0\">\n                <tbody>\n                  <tr v-for=\"row in profileRows\" :key=\"row.label\">\n                    <th class=\"text-uppercase text-xs text-secondary\">{{ row.label }}</th>\n                    <td class=\"text-sm\">{{ formatValue(row.value) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card\">\n          <div class=\"card-header pb-0\">\n            <h6 class=\"mb-0\">Change Password</h6>\n          </div>\n          <div class=\"card-body\">\n            <div\n              v-if=\"passwordMessage\"\n              :class=\"['alert', passwordType === 'success' ? 'alert-success' : 'alert-danger']\"\n            >\n              {{ passwordMessage }}\n            </div>\n            <form @submit.prevent=\"handleChangePassword\">\n              <div class=\"row\">\n                <div class=\"col-md-12 mb-3\">\n                  <label class=\"form-label\">Current Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.current_password\"\n                    type=\"password\"\n                    placeholder=\"Current Password\"\n                  />\n                </div>\n                <div class=\"col-md-6 mb-3\">\n                  <label class=\"form-label\">New Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.new_password\"\n                    type=\"password\"\n                    placeholder=\"New Password\"\n                  />\n                </div>\n                <div class=\"col-md-6 mb-3\">\n                  <label class=\"form-label\">Confirm New Password</label>\n                  <argon-input\n                    v-model=\"passwordForm.new_password_confirmation\"\n                    type=\"password\"\n                    placeholder=\"Confirm New Password\"\n                  />\n                </div>\n              </div>\n              <argon-button\n                class=\"mt-3\"\n                color=\"success\"\n                variant=\"gradient\"\n                :disabled=\"passwordLoading\"\n                fullWidth\n              >\n                {{ passwordLoading ? \"Updating...\" : \"Update Password\" }}\n              </argon-button>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-4\">\n        <profile-card />\n      </div>\n    </div>\n  </main>\n</template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}