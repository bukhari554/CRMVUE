{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container top-0 position-sticky z-index-sticky\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-12\"\n};\nconst _hoisted_4 = {\n  class: \"mt-0 main-content\"\n};\nconst _hoisted_5 = {\n  class: \"page-header min-vh-100\"\n};\nconst _hoisted_6 = {\n  class: \"container\"\n};\nconst _hoisted_7 = {\n  class: \"row\"\n};\nconst _hoisted_8 = {\n  class: \"mx-auto col-xl-4 col-lg-5 col-md-7 d-flex flex-column mx-lg-0\"\n};\nconst _hoisted_9 = {\n  class: \"card card-plain\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pb-0 card-header text-start\"\n}, [/*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"font-weight-bolder text-center\"\n}, \"Admin Sign In\"), /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"mb-0\"\n}, \"Enter your email and password to sign in\")], -1 /* HOISTED */);\nconst _hoisted_11 = {\n  class: \"card-body\"\n};\nconst _hoisted_12 = {\n  class: \"mb-3\"\n};\nconst _hoisted_13 = {\n  class: \"mb-3\"\n};\nconst _hoisted_14 = {\n  class: \"text-center\"\n};\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"px-1 pt-0 text-center card-footer px-lg-2\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"mx-auto mb-4 text-sm\"\n}, [/*#__PURE__*/_createTextVNode(\" Don't have an account? \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"/signup\",\n  class: \"text-success text-gradient font-weight-bold\"\n}, \"Sign up\")])], -1 /* HOISTED */);\nconst _hoisted_16 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"top-0 my-auto text-center col-6 d-lg-flex d-none h-100 pe-0 position-absolute end-0 justify-content-center flex-column\\\"><div class=\\\"position-relative bg-gradient-primary h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center overflow-hidden\\\" style=\\\"background-image:url(&quot;https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/signin-ill.jpg&quot;);background-size:cover;\\\"><span class=\\\"mask bg-gradient-success opacity-6\\\"></span><h4 class=\\\"mt-5 text-white font-weight-bolder position-relative\\\"> &quot;Attention is the new currency&quot; </h4><p class=\\\"text-white position-relative\\\"> The more effortless the writing looks, the more effort the writer actually put into the process. </p></div></div>\", 1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode($setup[\"Navbar\"], {\n    isBlur: \"blur  border-radius-lg my-3 py-2 start-0 end-0 mx-4 shadow\",\n    darkMode: true,\n    isBtn: \"bg-gradient-success\"\n  })])])]), _createElementVNode(\"main\", _hoisted_4, [_createElementVNode(\"section\", null, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"form\", {\n    role: \"form\",\n    onSubmit: _withModifiers($setup.handleLogin, [\"prevent\"])\n  }, [$setup.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(['alert', $setup.messageType === 'success' ? 'alert-success' : 'alert-danger'])\n  }, _toDisplayString($setup.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_12, [_createVNode($setup[\"ArgonInput\"], {\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    name: \"email\",\n    size: \"lg\",\n    modelValue: $setup.email,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.email = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_13, [_createVNode($setup[\"ArgonInput\"], {\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"password\",\n    size: \"lg\",\n    modelValue: $setup.password,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createVNode($setup[\"ArgonSwitch\"], {\n    id: \"rememberMe\",\n    name: \"remember-me\",\n    modelValue: $setup.rememberMe,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.rememberMe = $event)\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Remember me\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_14, [_createVNode($setup[\"ArgonButton\"], {\n    class: \"mt-4\",\n    variant: \"gradient\",\n    color: \"success\",\n    fullWidth: \"\",\n    size: \"lg\",\n    disabled: $setup.loading\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.loading ? \"Signing in...\" : \"Sign in\"), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"disabled\"])])], 32 /* NEED_HYDRATION */)]), _hoisted_15])]), _hoisted_16])])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createTextVNode","href","_createStaticVNode","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","$setup","isBlur","darkMode","isBtn","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","role","onSubmit","_withModifiers","handleLogin","message","key","_normalizeClass","messageType","_createCommentVNode","_hoisted_12","id","type","placeholder","name","size","modelValue","email","_cache","$event","_hoisted_13","password","rememberMe","default","_withCtx","_","_hoisted_14","variant","color","fullWidth","disabled","loading","_toDisplayString","_hoisted_15","_hoisted_16"],"sources":["/home/aurora/Videos/Forex_CRM_Vue/src/views/Admin/AdminSignin.vue"],"sourcesContent":["<script setup>\nimport { ref, onBeforeUnmount, onBeforeMount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport Navbar from \"@/examples/PageLayout/Navbarsignin.vue\";\nimport ArgonInput from \"@/components/ArgonInput.vue\";\nimport ArgonSwitch from \"@/components/ArgonSwitch.vue\";\nimport ArgonButton from \"@/components/ArgonButton.vue\";\nimport { APP_CONFIG } from \"@/Data/appConfig.js\";\nconst body = document.getElementsByTagName(\"body\")[0];\n\nconst store = useStore();\nconst router = useRouter();\nconst email = ref(\"\");\nconst password = ref(\"\");\nconst rememberMe = ref(false);\nconst loading = ref(false);\nconst message = ref(\"\");\nconst messageType = ref(\"\");\n\nonBeforeMount(() => {\n  // Initialize auth if not already done\n  if (!store.state.isAuthenticated) {\n    store.commit(\"initializeAuth\");\n  }\n  \n  // Redirect if already authenticated\n  if (store.getters.isAuthenticated) {\n    router.push(\"/dashboard-default\");\n    return;\n  }\n  \n  store.state.hideConfigButton = true;\n  store.state.showNavbar = false;\n  store.state.showSidenav = false;\n  store.state.showFooter = false;\n  body.classList.remove(\"bg-gray-100\");\n});\nonBeforeUnmount(() => {\n  store.state.hideConfigButton = false;\n  store.state.showNavbar = true;\n  store.state.showSidenav = true;\n  store.state.showFooter = true;\n  body.classList.add(\"bg-gray-100\");\n});\n\nconst handleLogin = async () => {\n  message.value = \"\";\n  messageType.value = \"\";\n\n  const trimmedEmail = email.value.trim();\n  if (!trimmedEmail || !password.value) {\n    message.value = \"Email and password are required.\";\n    messageType.value = \"error\";\n    return;\n  }\n\n  loading.value = true;\n\n  try {\n    const response = await fetch(`${APP_CONFIG.baseApiUrl}/client/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: trimmedEmail,\n        password: password.value\n      })\n    });\n\n    const data = await response.json().catch(() => null);\n\n    if (response.ok && data?.success) {\n      console.log(\"Login successful:\", data);\n      \n      // Extract token and user data from response structure\n      const token = data?.data?.token;\n      const user = data?.data?.user;\n      \n      // Store authentication in Vuex\n      if (token && user) {\n        store.dispatch(\"login\", { token, user });\n        message.value = \"Login successful! Redirecting...\";\n        messageType.value = \"success\";\n        setTimeout(() => {\n          router.push(\"/dashboard-default\");\n        }, 1500);\n      } else {\n        message.value = \"Login successful but no token or user data received.\";\n        messageType.value = \"error\";\n      }\n    } else {\n      const errorText =\n        data?.message ||\n        (response.status === 401\n          ? \"Invalid email or password.\"\n          : \"Login failed. Please try again.\");\n      message.value = errorText;\n      messageType.value = \"error\";\n    }\n  } catch (error) {\n    console.error(\"Login error:\", error);\n    message.value =\n      \"Unable to reach the server. Please ensure the backend is running.\";\n    messageType.value = \"error\";\n  } finally {\n    loading.value = false;\n  }\n};\n</script>\n<template>\n  <div class=\"container top-0 position-sticky z-index-sticky\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <navbar\n          isBlur=\"blur  border-radius-lg my-3 py-2 start-0 end-0 mx-4 shadow\"\n          v-bind:darkMode=\"true\"\n          isBtn=\"bg-gradient-success\"\n        />\n      </div>\n    </div>\n  </div>\n  <main class=\"mt-0 main-content\">\n    <section>\n      <div class=\"page-header min-vh-100\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div\n              class=\"mx-auto col-xl-4 col-lg-5 col-md-7 d-flex flex-column mx-lg-0\"\n            >\n              <div class=\"card card-plain\">\n                <div class=\"pb-0 card-header text-start\">\n                  <h4 class=\"font-weight-bolder text-center\">Admin Sign In</h4>\n                  <p class=\"mb-0\">Enter your email and password to sign in</p>\n                </div>\n                <div class=\"card-body\">\n                  <form role=\"form\" @submit.prevent=\"handleLogin\">\n                    <div\n                      v-if=\"message\"\n                      :class=\"[\n                        'alert',\n                        messageType === 'success'\n                          ? 'alert-success'\n                          : 'alert-danger'\n                      ]\"\n                    >\n                      {{ message }}\n                    </div>\n                    <div class=\"mb-3\">\n                      <argon-input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        name=\"email\"\n                        size=\"lg\"\n                        v-model=\"email\"\n                      />\n                    </div>\n                    <div class=\"mb-3\">\n                      <argon-input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        name=\"password\"\n                        size=\"lg\"\n                        v-model=\"password\"\n                      />\n                    </div>\n                    <argon-switch\n                      id=\"rememberMe\"\n                      name=\"remember-me\"\n                      v-model=\"rememberMe\"\n                      >Remember me</argon-switch\n                    >\n\n                    <div class=\"text-center\">\n                      <argon-button\n                        class=\"mt-4\"\n                        variant=\"gradient\"\n                        color=\"success\"\n                        fullWidth\n                        size=\"lg\"\n                        :disabled=\"loading\"\n                        >{{ loading ? \"Signing in...\" : \"Sign in\" }}</argon-button\n                      >\n                    </div>\n                  </form>\n                </div>\n                <div class=\"px-1 pt-0 text-center card-footer px-lg-2\">\n                  <p class=\"mx-auto mb-4 text-sm\">\n                    Don't have an account?\n                    <a\n                      href=\"/signup\"\n                      class=\"text-success text-gradient font-weight-bold\"\n                      >Sign up</a\n                    >\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div\n              class=\"top-0 my-auto text-center col-6 d-lg-flex d-none h-100 pe-0 position-absolute end-0 justify-content-center flex-column\"\n            >\n              <div\n                class=\"position-relative bg-gradient-primary h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center overflow-hidden\"\n                style=\"\n                  background-image: url(&quot;https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/signin-ill.jpg&quot;);\n                  background-size: cover;\n                \"\n              >\n                <span class=\"mask bg-gradient-success opacity-6\"></span>\n                <h4\n                  class=\"mt-5 text-white font-weight-bolder position-relative\"\n                >\n                  \"Attention is the new currency\"\n                </h4>\n                <p class=\"text-white position-relative\">\n                  The more effortless the writing looks, the more effort the\n                  writer actually put into the process.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}